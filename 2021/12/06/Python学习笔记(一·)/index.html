<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Pyhton学习笔记一(数据分析)"><meta name="keywords" content="Python"><meta name="author" content="klenq"><meta name="copyright" content="klenq"><title>Pyhton学习笔记一(数据分析) | klenq's blog</title><link rel="shortcut icon" href="/triangle.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%AE%89%E8%A3%85Linux-Windows10%E5%8F%8C%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">笔记本安装Linux+Windows10双系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">Python爬虫+数据分析</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E5%9F%BA%E7%A1%80"><span class="toc-number"></span> <span class="toc-text">Python基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E7%AC%A6%E5%92%8C%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">3.</span> <span class="toc-text">标识符和关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">4.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5"><span class="toc-number">5.</span> <span class="toc-text">输入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%92%8C%E5%BE%AA%E7%8E%AF"><span class="toc-number"></span> <span class="toc-text">判断和循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.</span> <span class="toc-text">判断语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.</span> <span class="toc-text">循环语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#break-continue-pass"><span class="toc-number">3.</span> <span class="toc-text">break, continue, pass</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number"></span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%88%AA%E5%8F%96%E5%92%8C%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.</span> <span class="toc-text">字符串的截取和连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number"></span> <span class="toc-text">列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">常用列表操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E7%BB%84"><span class="toc-number"></span> <span class="toc-text">元组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8"><span class="toc-number"></span> <span class="toc-text">字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.</span> <span class="toc-text">使用枚举</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88"><span class="toc-number"></span> <span class="toc-text">集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number"></span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">1.</span> <span class="toc-text">全局变量和局部变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number"></span> <span class="toc-text">文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">文件相关操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-number">1.</span> <span class="toc-text">捕获异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try%E2%80%A6finally%E2%80%A6"><span class="toc-number">2.</span> <span class="toc-text">try…finally…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB"><span class="toc-number"></span> <span class="toc-text">网络爬虫</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1"><span class="toc-number"></span> <span class="toc-text">任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB%E7%9F%A5%E8%AF%86"><span class="toc-number"></span> <span class="toc-text">基础爬虫知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B"><span class="toc-number"></span> <span class="toc-text">流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">引入模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">程序框架准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#urllib%E5%BA%93%E9%99%84%E5%8A%A0%E5%86%85%E5%AE%B9"><span class="toc-number">3.</span> <span class="toc-text">urllib库附加内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.</span> <span class="toc-text">get请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#post%E8%AF%B7%E6%B1%82"><span class="toc-number">3.2.</span> <span class="toc-text">post请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">3.3.</span> <span class="toc-text">修改请求头</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%95%E7%9D%80%E8%AE%BF%E9%97%AE%E8%B1%86%E7%93%A3"><span class="toc-number">3.3.1.</span> <span class="toc-text">试着访问豆瓣</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">获取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%BD%91%E9%A1%B5%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%E5%B9%B6%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E4%BF%A1%E6%81%AF"><span class="toc-number">4.1.</span> <span class="toc-text">对网页进行访问并获取页面信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8for%E5%BE%AA%E7%8E%AF%E5%88%86%E5%88%AB%E8%8E%B7%E5%8F%9610%E9%A1%B5%E4%BF%A1%E6%81%AF"><span class="toc-number">4.2.</span> <span class="toc-text">用for循环分别获取10页信息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Beautiful-Soup-%E8%A1%A5%E5%85%85%E5%86%85%E5%AE%B9"><span class="toc-number">5.</span> <span class="toc-text">Beautiful Soup 补充内容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Beautiful-Soup-4-%E5%B0%86%E5%A4%8D%E6%9D%82%E7%9A%84%E6%96%87%E6%A1%A3%E8%BD%AC%E6%8D%A2%E6%88%90%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84-%E6%AF%8F%E4%B8%AA%E8%8A%82%E7%82%B9%E9%83%BD%E6%98%AFpython%E5%AF%B9%E8%B1%A1-%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E5%BD%92%E7%BA%B3%E4%B8%BA%E4%B8%80%E4%B8%8B%E5%9B%9B%E7%A7%8D"><span class="toc-number">5.0.1.</span> <span class="toc-text">Beautiful Soup 4 将复杂的文档转换成树形结构, 每个节点都是python对象, 所有对象可以归纳为一下四种:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E9%81%8D%E5%8E%86"><span class="toc-number">5.1.</span> <span class="toc-text">文档遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E6%90%9C%E7%B4%A2"><span class="toc-number">5.2.</span> <span class="toc-text">文档搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#css%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-number">5.2.1.</span> <span class="toc-text">css选择器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%A1%A5%E5%85%85"><span class="toc-number">6.</span> <span class="toc-text">re正则表达式补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#re%E5%BA%93"><span class="toc-number">6.1.</span> <span class="toc-text">re库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8F%90%E5%8F%96"><span class="toc-number">7.</span> <span class="toc-text">正则表达式提取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E9%93%BE%E6%8E%A5"><span class="toc-number">7.1.</span> <span class="toc-text">提取链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E7%B1%BB%E4%BC%BC%E9%80%BB%E8%BE%91%E6%8F%90%E5%8F%96%E6%89%80%E6%9C%89%E9%9C%80%E8%A6%81%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-number">7.2.</span> <span class="toc-text">用类似逻辑提取所有需要的元素</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E5%BA%94%E6%AD%A3%E5%88%99"><span class="toc-number">7.2.1.</span> <span class="toc-text">对应正则:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%90%E5%8F%96"><span class="toc-number">7.2.2.</span> <span class="toc-text">提取:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E5%88%B0Excel%E8%A1%A8%E6%A0%BC"><span class="toc-number">8.</span> <span class="toc-text">保存到Excel表格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLite%E8%A1%A5%E5%85%85"><span class="toc-number">9.</span> <span class="toc-text">SQLite补充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQLite%E5%AE%9E%E8%B7%B5"><span class="toc-number">10.</span> <span class="toc-text">SQLite实践</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number"></span> <span class="toc-text">数据可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Flask%E5%85%A5%E9%97%A8"><span class="toc-number"></span> <span class="toc-text">Flask入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">Flask基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95"><span class="toc-number">2.</span> <span class="toc-text">处理表单</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E5%88%B6%E4%BD%9C-%E5%AE%9E%E6%88%98"><span class="toc-number"></span> <span class="toc-text">首页制作 实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Movie%E8%A1%A8%E6%A0%BC%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">Movie表格可视化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Echarts%E5%BA%94%E7%94%A8"><span class="toc-number"></span> <span class="toc-text">Echarts应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">1.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WordCloud%E5%BA%94%E7%94%A8"><span class="toc-number"></span> <span class="toc-text">WordCloud应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%9B%BE%E7%89%87%E6%94%BE%E5%88%B0%E9%A1%B5%E9%9D%A2%E4%B8%AD"><span class="toc-number">1.</span> <span class="toc-text">将图片放到页面中</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">klenq</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/klenQ/">Follow me on Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">36</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://raw.githubusercontent.com/klenQ/klenQ.github.io/master/img/top_img/ff7_img_2.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">klenq's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Pyhton学习笔记一(数据分析)</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-12-06</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Notes/">Notes</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="笔记本安装Linux-Windows10双系统"><a href="#笔记本安装Linux-Windows10双系统" class="headerlink" title="笔记本安装Linux+Windows10双系统"></a>笔记本安装Linux+Windows10双系统</h3><h3 id="Python爬虫-数据分析"><a href="#Python爬虫-数据分析" class="headerlink" title="Python爬虫+数据分析"></a>Python爬虫+数据分析</h3><blockquote>
<p>使用环境: </p>
<p>PyCharm</p>
<p>Windows 10 HOME x64</p>
</blockquote>
<span id="more"></span>



<h1 id="Python基础"><a href="#Python基础" class="headerlink" title="Python基础"></a>Python基础</h1><p>Python 是一门解释型, 面向对象的高级编程语言</p>
<p>开源， 支持交互式, 可跨平台移植的脚本语言</p>
<p>1991年第一个编译器诞生</p>
<blockquote>
<p> 使用Python3.5以上</p>
<p>PyCharm</p>
</blockquote>
<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p><code># 内容</code>代表注释</p>
<p>多行注释: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">Multiple Line comments</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>不可以用数字开头</p>
<h3 id="标识符和关键字"><a href="#标识符和关键字" class="headerlink" title="标识符和关键字"></a>标识符和关键字</h3><ul>
<li><p>什么是关键字</p>
<blockquote>
<p>python一些具有特殊功能的标示符，这就是所谓的关键字<br>关键字，是python已经使用的了，所以不允许开发者自己定义和关键字相同的名字的标示符</p>
</blockquote>
</li>
<li><p>查看关键字</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> keyword</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keyword.kwlist</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p><strong>格式化输出</strong></p>
<p>标准输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pirnt(&quot;我今年10岁&quot;)</span><br><span class="line">pirnt(&quot;我今年11岁&quot;)</span><br></pre></td></tr></table></figure>

<p>格式化输出: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我今年%d岁&quot;</span>%age)</span><br><span class="line">age += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我今年%d岁&quot;</span>%age)</span><br><span class="line">age = <span class="number">18</span></span><br><span class="line">name = <span class="string">&quot;xiaohua&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我的姓名是%s,年龄是%d&quot;</span>%(name,age))</span><br></pre></td></tr></table></figure>

<p><code>%</code>就是代表格式化操作符，可以在字符串中相当于占位符，之后再赋值</p>
<p><code>%d</code>代表digital，有符号的十进制整数</p>
<p><code>%s</code>代表字符串， 使用str()</p>
<p>还有很多格式化占位符, 具体可以参考官方文档</p>
<p><strong>输出中也可以插入分隔符</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;hello&quot;, &quot;world&quot;, &quot;end&quot; sep=&quot;.&quot;)</span><br></pre></td></tr></table></figure>



<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;please enter your password&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Your just entered:&quot;</span> , password)</span><br></pre></td></tr></table></figure>



<h2 id="判断和循环"><a href="#判断和循环" class="headerlink" title="判断和循环"></a>判断和循环</h2><h3 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h3><p>标准语法: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>: </span><br><span class="line">	...</span><br><span class="line"><span class="keyword">elif</span>: </span><br><span class="line">	...</span><br><span class="line"><span class="keyword">else</span>: </span><br><span class="line">	...</span><br></pre></td></tr></table></figure>



<p><strong>逻辑字符</strong></p>
<p><code>and</code> 和<code>or</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> score &gt; <span class="number">90</span> <span class="keyword">and</span> score &lt; <span class="number">100</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> score == <span class="number">90</span> <span class="keyword">or</span> score == <span class="number">80</span></span><br></pre></td></tr></table></figure>



<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><p>while循环基本语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">i = 0</span><br><span class="line">while i&lt;5:</span><br><span class="line">	print(&quot;当前是第%d次执行循环&quot;%(i+1))</span><br><span class="line">	print(&quot;i=%d&quot;%i)</span><br><span class="line">	i+=1</span><br></pre></td></tr></table></figure>



<p>for循环基础语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 列表或者字符串等:</span><br><span class="line">    ...</span><br><span class="line">	循环满足条件时执行的代码</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = &#x27;chengdu&#x27;</span><br><span class="line">for x in name:</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for i in range(0,100,10)</span><br></pre></td></tr></table></figure>





<h3 id="break-continue-pass"><a href="#break-continue-pass" class="headerlink" title="break, continue, pass"></a><code>break</code>, <code>continue</code>, <code>pass</code></h3><ul>
<li>break 可以跳出循环</li>
<li>continue跳过当前循环</li>
<li>pass是空语句, 一般用作占用语句, 不做任何是事情</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p><code>\</code>代表转义字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;...&#x27;...&quot;</span>)</span><br><span class="line">my_str = <span class="string">&#x27;I\&#x27;m a student&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(my_str)</span><br></pre></td></tr></table></figure>



<p>三个双引号可以输入段落</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">this</span></span><br><span class="line"><span class="string">	is</span></span><br><span class="line"><span class="string">		a</span></span><br><span class="line"><span class="string">			paragraph</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="字符串的截取和连接"><a href="#字符串的截取和连接" class="headerlink" title="字符串的截取和连接"></a>字符串的截取和连接</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span>=<span class="string">&#x27;chengdu&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>) <span class="comment"># 输出字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">0</span>:-<span class="number">1</span>]) <span class="comment"># 输出第一个到倒数第二个的所有字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">0</span>]) <span class="comment"># 输出字符串第一个字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">2</span>:<span class="number">5</span>]) <span class="comment"># 输出从第三个开始到第五个的字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">2</span>:]) <span class="comment"># 输出从第三个开始后的所有字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span> * <span class="number">2</span>) <span class="comment"># 输出字符串两次</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span> + <span class="string">&#x27;你好&#x27;</span>) <span class="comment"># 连接字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[:<span class="number">5</span>]) <span class="comment"># 输出第五个字母前的所有字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">0</span>:<span class="number">7</span>:<span class="number">2</span>]) <span class="comment"># [起始：终止：步长]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------------&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello\nchengdu&#x27;</span>) <span class="comment"># 使用反斜杠(\)+n转义特殊字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&#x27;hello\npython&#x27;</span>) <span class="comment"># 在字符串前面添加一个 r，表示原始字符串，不会发生转义</span></span><br></pre></td></tr></table></figure>



<p>字符串有很多常用方法, 具体参考官方文档</p>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>类似其他语言的数组</p>
<p>格式: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">namesList = [<span class="string">&#x27;xiaoWang&#x27;</span>,<span class="string">&#x27;xiaoZhang&#x27;</span>,<span class="string">&#x27;xiaoHua&#x27;</span>]</span><br><span class="line">testList = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>]</span><br></pre></td></tr></table></figure>



<p>打印列表: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">namesList = [<span class="string">&#x27;xiaoWang&#x27;</span>,<span class="string">&#x27;xiaoZhang&#x27;</span>,<span class="string">&#x27;xiaoHua&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(namesList[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(namesList[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(namesList[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>



<h3 id="常用列表操作"><a href="#常用列表操作" class="headerlink" title="常用列表操作"></a>常用列表操作</h3><ul>
<li>append()</li>
<li>list[2:2:2]</li>
<li>insert(1, 3)</li>
<li>pop()</li>
<li>sort()</li>
<li>reverse()</li>
</ul>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>元组类似列表</p>
<p>但是元组不能修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tup1 = () <span class="comment"># 空元组</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">50</span>) <span class="comment"># 不加逗号，类型为整型</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup1)) <span class="comment">#输出&lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">tup1 = (<span class="number">50</span>,) <span class="comment"># 加逗号，类型为元组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup1)) <span class="comment">#输出&lt;class &#x27;tuple&#x27;&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;baidu&#x27;</span>, <span class="number">2000</span>, <span class="number">2020</span>)</span><br><span class="line">tup2 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;tup1[0]: &quot;</span>, tup1[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;tup2[1:5]: &quot;</span>, tup2[<span class="number">1</span>:<span class="number">5</span>])</span><br></pre></td></tr></table></figure>



<p><strong>元组中的元素值是不允许修改的，但我们可以对元组进行连接组合</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">12</span>, <span class="number">34.56</span>)</span><br><span class="line">tup2 = (<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>)</span><br><span class="line"><span class="comment"># 以下修改元组元素操作是非法的。</span></span><br><span class="line"><span class="comment"># tup1[0] = 100</span></span><br><span class="line"><span class="comment"># 创建一个新的元组</span></span><br><span class="line">tup3 = tup1 + tup2</span><br><span class="line"><span class="built_in">print</span> (tup3)</span><br></pre></td></tr></table></figure>



<ul>
<li>删除元组后，再次访问会报错</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;baidu&#x27;</span>, <span class="number">2000</span>, <span class="number">2020</span>)</span><br><span class="line"><span class="built_in">print</span> (tup)</span><br><span class="line"><span class="keyword">del</span> tup</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;删除后的元组 tup : &quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (tup)</span><br></pre></td></tr></table></figure>





<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><ul>
<li>变量info为字典类型：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;班长&#x27;</span>, <span class="string">&#x27;id&#x27;</span>:<span class="number">100</span>, <span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;address&#x27;</span>:<span class="string">&#x27;地球亚洲中国北京&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>访问值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;吴彦祖&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(info[<span class="string">&#x27;age&#x27;</span>]) <span class="comment"># 获取年龄</span></span><br><span class="line"><span class="comment"># print(info[&#x27;sex&#x27;]) # 获取不存在的key，会发生异常</span></span><br><span class="line"><span class="built_in">print</span>(info.get(<span class="string">&#x27;sex&#x27;</span>)) <span class="comment"># 获取不存在的key，获取到空的内容，不会出现异常</span></span><br></pre></td></tr></table></figure>

<ul>
<li>还可以设置默认值：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>age = info.get(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>) <span class="comment"># 若info中不存在&#x27;age&#x27;这个键，就返回默认值18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>age</span><br><span class="line"><span class="number">18</span></span><br></pre></td></tr></table></figure>



<p>增删改查方法</p>
<ul>
<li>add()</li>
<li>update()</li>
<li>remove()</li>
<li>get()</li>
<li>keys()</li>
<li>values()</li>
<li>items() —每个键值对是一个元组</li>
</ul>
<p>for遍历所有键值对</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> info.items():</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;key=%s, value=%s&quot;</span>%(key, value))</span><br></pre></td></tr></table></figure>



<h3 id="使用枚举"><a href="#使用枚举" class="headerlink" title="使用枚举"></a>使用枚举</h3><p>同时拿到下标和元素内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myList = [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> i,x <span class="keyword">in</span> <span class="built_in">enumerate</span>(myList): </span><br><span class="line">	<span class="built_in">print</span>(i,x)</span><br></pre></td></tr></table></figure>





<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>Set, 类似字典的key值, 不可重复, 无序的</p>
<p>一样拥有差不多的增删改查方法</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>可以自定义返回值, 和返回值的数量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 打印一条线</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_line</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----------&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印指定数量的线</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_lines</span>(<span class="params">num</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,num):</span><br><span class="line">        print_line()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回三个数的和</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">three_num_sum</span>(<span class="params">a,b,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b+c</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回三个数的平均值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">three_num_avg</span>(<span class="params">a,b,c</span>):</span></span><br><span class="line">    <span class="keyword">return</span> (three_num_sum(a,b,c))/<span class="number">3</span></span><br></pre></td></tr></table></figure>



<h3 id="全局变量和局部变量"><a href="#全局变量和局部变量" class="headerlink" title="全局变量和局部变量"></a>全局变量和局部变量</h3><p>可以用<code>global</code> 修饰符, 声明全局变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">global a</span><br><span class="line">a = 100</span><br></pre></td></tr></table></figure>



<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>文件的打开和关闭</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;w&quot;</span>)  <span class="comment">#w 代表访问符(读写)</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>



<p>写入数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f.write(<span class="string">&#x27;hello,world&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>读取数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">f.read()</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">30</span>)</span><br><span class="line">content = f.read()</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者整行一起读</span></span><br><span class="line">content = f.readlines()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(content))</span><br><span class="line">i=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> temp <span class="keyword">in</span> content:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;%d:%s&quot;</span>%(i, temp))</span><br><span class="line">	i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">content = f.readline()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1:%s&quot;</span>%content)</span><br><span class="line">content = f.readline()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;2:%s&quot;</span>%content)</span><br></pre></td></tr></table></figure>



<h3 id="文件相关操作"><a href="#文件相关操作" class="headerlink" title="文件相关操作"></a>文件相关操作</h3><ul>
<li>重命名</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.rename(<span class="string">&quot;毕业论文.txt&quot;</span>, <span class="string">&quot;毕业论文-最终版.txt&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>删除</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.remove(<span class="string">&quot;毕业论文.txt&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件夹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.mkdir(<span class="string">&quot;张三&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取当前目录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>

<ul>
<li>改变默认目录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">&quot;../&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取目录列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.listdir(<span class="string">&quot;./&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>删除文件夹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.rmdir(<span class="string">&quot;张三&quot;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;-----test--1---&#x27;</span>)</span><br><span class="line">	<span class="built_in">open</span>(<span class="string">&#x27;123.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;-----test--2---&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>



<p><strong>捕获多个异常</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;-----test--1---&#x27;</span>)</span><br><span class="line">    <span class="built_in">open</span>(<span class="string">&#x27;123.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="comment"># 如果123.txt文件不存在，那么会产生 IOError 异常</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;-----test--2---&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(num)<span class="comment"># 如果num变量没有定义，那么会产生 NameError 异常</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">except</span> (IOError,NameError):</span><br><span class="line">        <span class="comment">#如果想通过一次except捕获到多个异常可以用一个元组的方式</span></span><br></pre></td></tr></table></figure>

<p><strong>捕获所有异常</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>: </span><br><span class="line">	...</span><br><span class="line"><span class="keyword">except</span> (IOError,NameError):</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>



<h3 id="try…finally…"><a href="#try…finally…" class="headerlink" title="try…finally…"></a>try…finally…</h3><p>demo: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            content = f.readline()</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(content) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">                time.sleep(<span class="number">2</span>)</span><br><span class="line">                <span class="built_in">print</span>(content)</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="comment">#如果在读取文件的过程中，产生了异常，那么就会捕获到</span></span><br><span class="line">		<span class="comment">#比如 按下了 ctrl+c</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line">	<span class="keyword">finally</span>:</span><br><span class="line">		f.close()</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;关闭文件&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;没有这个文件&quot;</span>)</span><br></pre></td></tr></table></figure>



<blockquote>
<p>test.txt文件中每一行数据打印，但是我有意在每打印一行之前用time.sleep方法暂停2秒钟。这样<br>做的原因是让程序运行得慢一些。在程序运行的时候，按Ctrl+c中断（取消）程序。<br>我们可以观察到KeyboardInterrupt异常被触发，程序退出。但是在程序退出之前，finally从句仍<br>然被执行，把文件关闭。</p>
</blockquote>
<h1 id="网络爬虫"><a href="#网络爬虫" class="headerlink" title="网络爬虫"></a>网络爬虫</h1><p>正片开始^^</p>
<h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><p><strong>实现案例</strong>, 爬取豆瓣电影Top250的基本信息, 包括电影名称, 评分, 评价数量, 电影概况, 电影链接等等</p>
<p><a target="_blank" rel="noopener" href="https://movie.douban.com/top250">豆瓣Top250电影榜单</a></p>
<h2 id="基础爬虫知识"><a href="#基础爬虫知识" class="headerlink" title="基础爬虫知识"></a>基础爬虫知识</h2><ul>
<li>爬虫就是按照一定规则, 自动抓取互联网程序或者脚本</li>
<li>可以爬取图片, 视频, 能通过浏览器访问的数据都可以用爬虫获取</li>
<li>爬虫的本质就是模拟浏览器打开网页, 获取我们需要的数据</li>
</ul>
<h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>需要HTML、CSS、JS的基础知识</p>
<ul>
<li>爬取网页</li>
<li>解析数据</li>
<li>保存数据</li>
</ul>
<h3 id="引入模块"><a href="#引入模块" class="headerlink" title="引入模块"></a>引入模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引入自定义模块</span></span><br><span class="line"><span class="keyword">from</span> directory <span class="keyword">import</span> t1</span><br><span class="line"><span class="comment"># 引入官方模块</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 引入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> bs4</span><br></pre></td></tr></table></figure>



<p>此案例需要的模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bs4          <span class="comment">#网页解析</span></span><br><span class="line"><span class="keyword">import</span> re           <span class="comment">#正则表达式</span></span><br><span class="line"><span class="keyword">import</span> urllib.request,urllib.error  <span class="comment">#指定URL 获取网页数据</span></span><br><span class="line"><span class="keyword">import</span> xlwt         <span class="comment">#进行excel操作</span></span><br><span class="line"><span class="keyword">import</span> sqlite3      <span class="comment">#数据库</span></span><br></pre></td></tr></table></figure>



<h3 id="程序框架准备"><a href="#程序框架准备" class="headerlink" title="程序框架准备"></a>程序框架准备</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">    <span class="comment"># 爬取网页</span></span><br><span class="line">    <span class="comment"># 解析数据</span></span><br><span class="line">    datalist = getData(baseurl)</span><br><span class="line">    savepath = <span class="string">&quot;.\\豆瓣电影Top250.xls&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    saveData(savepath)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getData</span>(<span class="params">baseurl</span>):</span></span><br><span class="line">    datalist = []</span><br><span class="line">    <span class="comment"># 解析数据</span></span><br><span class="line">    <span class="keyword">return</span> datalist</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveData</span>(<span class="params">savepath</span>):</span></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 程序执行时 调用函数</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<h3 id="urllib库附加内容"><a href="#urllib库附加内容" class="headerlink" title="urllib库附加内容"></a><code>urllib</code>库附加内容</h3><h4 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="comment"># 获取get请求</span></span><br><span class="line">response = urllib.request.urlopen(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>



<h4 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h4><p><code>http://httpbin.org/</code>是一个测试http的网站</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">data = <span class="built_in">bytes</span>(urllib.parse.urlencode(&#123;<span class="string">&quot;hello&quot;</span>:<span class="string">&quot;world&quot;</span>&#125;),encoding = <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">response = urllib.request.urlopen(<span class="string">&quot;http://httpbin.org/post&quot;</span>, data)</span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>



<p><strong>可以对请求加上超时时间</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>: </span><br><span class="line">	response = urllib.request.urlopen(<span class="string">&quot;http://httpbin.org/get&quot;</span>, timeout = <span class="number">0.01</span>)</span><br><span class="line">	<span class="built_in">print</span>(response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;time out!!&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>response 里面还包含很多信息</p>
<ul>
<li>getheader()</li>
</ul>
<h4 id="修改请求头"><a href="#修改请求头" class="headerlink" title="修改请求头"></a>修改请求头</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://httpbin.org/post&quot;</span></span><br><span class="line">data = <span class="built_in">bytes</span>(urllib.parse.urlencode(&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;eric&#x27;</span>&#125;),encoding = <span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">req = urllib.request.Request(url=url, data=data, headers=headers, method=<span class="string">&quot;POST&quot;</span>)</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&quot;utf-8&quot;</span>))</span><br></pre></td></tr></table></figure>



<h5 id="试着访问豆瓣"><a href="#试着访问豆瓣" class="headerlink" title="试着访问豆瓣"></a>试着访问豆瓣</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://www.douban.com&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">req = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line"><span class="built_in">print</span>(response.read().decode(<span class="string">&quot;utf-8&quot;</span>))</span><br></pre></td></tr></table></figure>



<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><h4 id="对网页进行访问并获取页面信息"><a href="#对网页进行访问并获取页面信息" class="headerlink" title="对网页进行访问并获取页面信息"></a>对网页进行访问并获取页面信息</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 得到指定url的网页内容</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">askURL</span>(<span class="params">url</span>):</span></span><br><span class="line">    headers = &#123;         <span class="comment"># 模拟头部信息</span></span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">                        <span class="comment"># 用户代理</span></span><br><span class="line"></span><br><span class="line">    req = urllib.request.Request(url=url, headers=headers)</span><br><span class="line">    html = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib.request.urlopen(req)</span><br><span class="line">        html = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e,<span class="string">&quot;code&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.code)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&quot;reason&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(e.reason)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> html</span><br></pre></td></tr></table></figure>



<h4 id="用for循环分别获取10页信息"><a href="#用for循环分别获取10页信息" class="headerlink" title="用for循环分别获取10页信息"></a>用for循环分别获取10页信息</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">baseurl = <span class="string">&quot;https://movie.douban.com/top250?start=&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>):      <span class="comment"># 调用获取页面的信息函数, 共10次</span></span><br><span class="line">    url = baseurl + <span class="built_in">str</span>(i*<span class="number">25</span>)</span><br><span class="line">    html = askURL(url)</span><br></pre></td></tr></table></figure>





<h3 id="Beautiful-Soup-补充内容"><a href="#Beautiful-Soup-补充内容" class="headerlink" title="Beautiful Soup 补充内容"></a>Beautiful Soup 补充内容</h3><h5 id="Beautiful-Soup-4-将复杂的文档转换成树形结构-每个节点都是python对象-所有对象可以归纳为一下四种"><a href="#Beautiful-Soup-4-将复杂的文档转换成树形结构-每个节点都是python对象-所有对象可以归纳为一下四种" class="headerlink" title="Beautiful Soup 4 将复杂的文档转换成树形结构, 每个节点都是python对象, 所有对象可以归纳为一下四种:"></a>Beautiful Soup 4 将复杂的文档转换成树形结构, 每个节点都是python对象, 所有对象可以归纳为一下四种:</h5><ul>
<li>Tag - 标签</li>
<li>NavigableString - 标签里的内容</li>
<li>BeautifulSoup - 整个文档</li>
<li>Comment - 注释</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(bs.title)</span><br><span class="line"><span class="built_in">print</span>(bs.a)</span><br><span class="line"><span class="built_in">print</span>(bs.title.string)</span><br><span class="line"><span class="built_in">print</span>(bs.a.attrs)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bs.name)</span><br><span class="line"><span class="built_in">print</span>(bs.a.string) <span class="comment"># 不包含注释的标签符号</span></span><br></pre></td></tr></table></figure>



<h4 id="文档遍历"><a href="#文档遍历" class="headerlink" title="文档遍历"></a>文档遍历</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(bs.head.contents[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>



<h4 id="文档搜索"><a href="#文档搜索" class="headerlink" title="文档搜索"></a>文档搜索</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串过滤, 查找与字符串完全匹配的内容</span></span><br><span class="line">t_list = bs.findAll(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则表达式 使用search()</span></span><br><span class="line">t_list = bs.findAll(re.<span class="built_in">compile</span>(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name_is_exists</span>(<span class="params">tag</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.find_all(name_is_exists)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数</span></span><br><span class="line">t_list = bs.find_all(<span class="built_in">id</span>=<span class="string">&quot;head&quot;</span>)</span><br><span class="line">t_list = bs.find_all(class_=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文本参数</span></span><br><span class="line">t_list = bs.find_all(text = <span class="string">&quot;hao123&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># limit 参数</span></span><br><span class="line">t_list = bs.find_all(<span class="string">&quot;a&quot;</span>,limit=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>



<h5 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># css 选择器</span></span><br><span class="line">t_list = bs.select(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.select(<span class="string">&#x27;#head&#x27;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.select(<span class="string">&quot;a[class=&#x27;bri&#x27;]&quot;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.select(<span class="string">&quot;head &gt; title&quot;</span>)</span><br><span class="line"></span><br><span class="line">t_list = bs.select(<span class="string">&quot;.mnav ~ .bri&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="re正则表达式补充"><a href="#re正则表达式补充" class="headerlink" title="re正则表达式补充"></a>re正则表达式补充</h3><table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>表示任何单个字符</td>
<td></td>
</tr>
<tr>
<td>[]</td>
<td>字符集, 对单个字符给出取值范围</td>
<td></td>
</tr>
<tr>
<td>[^ ]</td>
<td>排除范围</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>0或者多个</td>
<td></td>
</tr>
<tr>
<td>+</td>
<td>1个或者多个</td>
<td></td>
</tr>
<tr>
<td>?</td>
<td>0或者1</td>
<td></td>
</tr>
<tr>
<td>|</td>
<td>左右表达式任意一个</td>
<td></td>
</tr>
<tr>
<td>{m}</td>
<td>表示m次</td>
<td></td>
</tr>
<tr>
<td>{m,n}</td>
<td>m到n次</td>
<td></td>
</tr>
<tr>
<td>^</td>
<td>开头</td>
<td></td>
</tr>
<tr>
<td>$</td>
<td>结尾</td>
<td></td>
</tr>
<tr>
<td>()</td>
<td>分组</td>
<td></td>
</tr>
<tr>
<td>\d</td>
<td>数字</td>
<td></td>
</tr>
<tr>
<td>\w</td>
<td>字符, 数字和字母</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>贪婪匹配<br> 默认情况下，正则表达式使用最长匹配原则（也叫贪婪匹配原则）。<br> 例如：要将”zoom”中匹配”zo?”的部 分替换成”r”,替换的的结果是”rom”。如果要将”zoom”中匹配”zo*”  的部分替换成”r”,替换后的结果是”rm”。</p>
<p>非贪婪匹配<br> 当字符？紧随其他限定符（*、+、？、{n}、{n,}、{n,m}）之后时，匹配模式变成了最短匹配原则（也 叫非贪婪匹配原则）。<br> 例如：在字符串”fooood”中，”fo+?”只匹配”fo”部分，而”fo+”匹配”foooo部分。</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/regexp/regexp-syntax.html">正则表达式语法</a></p>
</blockquote>
<h4 id="re库"><a href="#re库" class="headerlink" title="re库"></a>re库</h4><ul>
<li>search</li>
<li>match()</li>
<li>findall()</li>
<li>split()</li>
<li>finditer()</li>
<li>sub()</li>
</ul>
<p>还有一些修饰符</p>
<ul>
<li>re.l</li>
<li>re.L</li>
<li>re.M</li>
<li>re.S</li>
<li>re.U</li>
<li>re.X</li>
</ul>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pat = re.<span class="built_in">compile</span>(<span class="string">&quot;AA&quot;</span>) <span class="comment"># AA是正则表达式</span></span><br><span class="line">m = pat.search(<span class="string">&quot;CAAA&quot;</span>) <span class="comment"># 被校验的内容</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;ASDaDFGAa&quot;</span>))</span><br></pre></td></tr></table></figure>



<p>用第二个参数替换第一个参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;abcdaaacga&quot;</span>))</span><br></pre></td></tr></table></figure>





<h3 id="正则表达式提取"><a href="#正则表达式提取" class="headerlink" title="正则表达式提取"></a>正则表达式提取</h3><h4 id="提取链接"><a href="#提取链接" class="headerlink" title="提取链接"></a>提取链接</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;</span>)    <span class="comment"># 创建正则表达式对象, 表示规则(字符串模式), 非贪婪模式</span></span><br><span class="line">link = re.findall(findLink, item)[<span class="number">0</span>]</span><br><span class="line">data.append(link)</span><br></pre></td></tr></table></figure>

<h4 id="用类似逻辑提取所有需要的元素"><a href="#用类似逻辑提取所有需要的元素" class="headerlink" title="用类似逻辑提取所有需要的元素"></a>用类似逻辑提取所有需要的元素</h4><h5 id="对应正则"><a href="#对应正则" class="headerlink" title="对应正则:"></a>对应正则:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">findLink = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;a href=&quot;(.*?)&quot;&gt;&#x27;</span>)  <span class="comment"># 创建正则表达式对象, 表示规则(字符串模式), 非贪婪模式</span></span><br><span class="line">findImgSrc = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;img alt=&quot;.*src=&quot;(.*?)&quot;&#x27;</span>, re.S)  <span class="comment"># re.S 让换行符包含再字符中</span></span><br><span class="line">findTitle = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;title&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>)</span><br><span class="line">findRating = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;rating_num&quot; property=&quot;v:average&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>)</span><br><span class="line">findJudge = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span&gt;(\d*)人评价&lt;/span&gt;&#x27;</span>)</span><br><span class="line">findInq = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;span class=&quot;inq&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>)</span><br><span class="line">findBd = re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;p class=&quot;&quot;&gt;(.*?)&lt;/p&gt;&#x27;</span>, re.S)</span><br></pre></td></tr></table></figure>



<h5 id="提取"><a href="#提取" class="headerlink" title="提取:"></a>提取:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;div&#x27;</span>, class_=<span class="string">&quot;item&quot;</span>):  <span class="comment"># 查找符合要求的字符串, 形成列表</span></span><br><span class="line">    <span class="comment"># 拿到了class属性为item的内容</span></span><br><span class="line">    <span class="comment"># print(item)</span></span><br><span class="line">    data = []  <span class="comment"># 一部电影的所有信息</span></span><br><span class="line">    item = <span class="built_in">str</span>(item)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 找链接</span></span><br><span class="line">    data.append(findElement(findLink, item))</span><br><span class="line">    data.append(findElement(findImgSrc, item))</span><br><span class="line">    </span><br><span class="line">    titles = re.findall(findTitle, item)</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(titles)==<span class="number">2</span>):</span><br><span class="line">        ctitle = titles[<span class="number">0</span>]</span><br><span class="line">        data.append(ctitle)</span><br><span class="line">        otitle = titles[<span class="number">1</span>].replace(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        data.append(otitle)</span><br><span class="line">    <span class="keyword">else</span>: </span><br><span class="line">        data.append(titles[<span class="number">0</span>])</span><br><span class="line">        data.append(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    data.append(findElement(findRating, item))</span><br><span class="line">    data.append(findElement(findJudge, item))</span><br><span class="line">    inq = re.findall(findInq, item)</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(inq) != <span class="number">0</span>):</span><br><span class="line">        inq = inq[<span class="number">0</span>].replace(<span class="string">&quot;。&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        data.append(inq)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data.append(<span class="string">&quot; &quot;</span>)</span><br><span class="line">    bd = findElement(findBd, item)</span><br><span class="line">    bd = re.sub(<span class="string">&#x27;&lt;br(\s+)?/&gt;(\s+)?&#x27;</span>, <span class="string">&quot; &quot;</span>, bd)   <span class="comment"># 去掉&lt;br/&gt;</span></span><br><span class="line">    bd = re.sub(<span class="string">&#x27;/&#x27;</span>, <span class="string">&quot; &quot;</span>, bd)                   <span class="comment"># 替换/</span></span><br><span class="line">    data.append(bd.strip())     <span class="comment"># 去掉前后空格</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    datalist.append(data)</span><br></pre></td></tr></table></figure>



<h3 id="保存到Excel表格"><a href="#保存到Excel表格" class="headerlink" title="保存到Excel表格"></a>保存到Excel表格</h3><p>使用xlwt库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveData</span>(<span class="params">datalist,savepath</span>):</span></span><br><span class="line">    <span class="comment"># 保存数据</span></span><br><span class="line">    book = xlwt.Workbook(encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    sheet = book.add_sheet(<span class="string">&#x27;豆瓣电影Top250&#x27;</span>,cell_overwrite_ok=<span class="literal">True</span>)</span><br><span class="line">    col = (<span class="string">&quot;电影详情链接&quot;</span>, <span class="string">&quot;图片链接&quot;</span>,<span class="string">&quot;影片中文名&quot;</span>,<span class="string">&quot;影片外文名&quot;</span>,<span class="string">&quot;评分&quot;</span>,<span class="string">&quot;评价数&quot;</span>,<span class="string">&quot;概况&quot;</span>,<span class="string">&quot;相关信息&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>):</span><br><span class="line">        sheet.write(<span class="number">0</span>,i,col[i])</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第%d条&quot;</span>%(i+<span class="number">1</span>))</span><br><span class="line">        data = datalist[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>):</span><br><span class="line">            sheet.write(i+<span class="number">1</span>,j,data[j])</span><br><span class="line"></span><br><span class="line">    book.save(savepath)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;End&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>到此为止, excel表格的保存方式结束</p>
<h3 id="SQLite补充"><a href="#SQLite补充" class="headerlink" title="SQLite补充"></a>SQLite补充</h3><p>建表非常简单: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line">conn = sqlite3.connect(<span class="string">&quot;test.db&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Opened database successfully&quot;</span>)</span><br><span class="line">c = conn.cursor()</span><br></pre></td></tr></table></figure>

<p>建表语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    create table company</span></span><br><span class="line"><span class="string">        (id int primary key not null,</span></span><br><span class="line"><span class="string">        name text not null,</span></span><br><span class="line"><span class="string">        age int not null,</span></span><br><span class="line"><span class="string">        address char(50),</span></span><br><span class="line"><span class="string">        salary real);</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">cursor.execute(sql)</span><br><span class="line">conn.commit()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>查询数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    select * from company</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">c.execute(sql)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> c:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;id = &quot;</span>, row[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name = &quot;</span>,row[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;address = &quot;</span>,row[<span class="number">2</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;salary = &quot;</span>,row[<span class="number">3</span>])</span><br><span class="line">conn.close()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Create table correctly&quot;</span>)</span><br></pre></td></tr></table></figure>





<h3 id="SQLite实践"><a href="#SQLite实践" class="headerlink" title="SQLite实践"></a>SQLite实践</h3><p>首先也是建表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_db</span>(<span class="params">dbpath</span>):</span></span><br><span class="line">    sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        create table movie250 </span></span><br><span class="line"><span class="string">        (</span></span><br><span class="line"><span class="string">        id integer primary key autoincrement,</span></span><br><span class="line"><span class="string">        info_link text,</span></span><br><span class="line"><span class="string">        pic_link text,</span></span><br><span class="line"><span class="string">        cname varchar,</span></span><br><span class="line"><span class="string">        ename varchar,</span></span><br><span class="line"><span class="string">        score numeric,</span></span><br><span class="line"><span class="string">        rated numeric,</span></span><br><span class="line"><span class="string">        introduction text,</span></span><br><span class="line"><span class="string">        info text</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>



<p>然后将数据遍历并插入进数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveData2DB</span>(<span class="params">datalist, dbpath</span>):</span></span><br><span class="line">    conn = sqlite3.connect(dbpath)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datalist:</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">            data[index] = <span class="string">&#x27;&quot;&#x27;</span>+data[index]+<span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">        sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            insert into movie250(</span></span><br><span class="line"><span class="string">                info_link, pic_link, cname, ename, score, rated, introduction, info)</span></span><br><span class="line"><span class="string">                values (%s)</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span>%<span class="string">&quot;,&quot;</span>.join(data)</span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        conn.commit()</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>



<h1 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h1><h2 id="Flask入门"><a href="#Flask入门" class="headerlink" title="Flask入门"></a>Flask入门</h2><p>Flask是一个<strong>Web框架</strong>, Python中最出名的是Django框架, 因为其内容非常全面</p>
<p>Flask的核心是路由转发和页面渲染, Werkzeug和Jinja2</p>
<h3 id="Flask基础"><a href="#Flask基础" class="headerlink" title="Flask基础"></a>Flask基础</h3><p><strong>Helloworld</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span>  <span class="comment"># put application&#x27;s code here</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">welcome</span>(<span class="params">name</span>):</span>  </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span>+name</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/user/&lt;int:id&gt;&#x27;</span></span>) </span><span class="comment"># 定义整形, 还支持float类型</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">welcome2</span>(<span class="params"><span class="built_in">id</span></span>):</span>  </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span>+ <span class="built_in">id</span></span><br></pre></td></tr></table></figure>



<p><strong>使用jinja2渲染并返回文件</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="comment"># 渲染好返回文件</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>渲染同时可以传递参数到页面, </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time = datetime.date.today()</span><br><span class="line"><span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, var=time)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome &#123;&#123; var &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>传递列表参数的时候又特定语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = [<span class="string">&quot;校长&quot;</span>, <span class="string">&quot;小王&quot;</span>, <span class="string">&quot;小赵&quot;</span>]</span><br><span class="line">task = &#123;<span class="string">&quot;任务&quot;</span>:<span class="string">&quot;打扫卫生&quot;</span>,<span class="string">&quot;时间&quot;</span>:<span class="string">&quot;3小时&quot;</span>&#125;</span><br><span class="line"><span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, var=time, <span class="built_in">list</span>=name, task=task)</span><br></pre></td></tr></table></figure>

<p>显示列表参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> data <span class="keyword">in</span> <span class="built_in">list</span> %&#125;</span><br><span class="line">    &lt;li&gt;&#123;&#123; data &#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>

<p>显示字典参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">任务: <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    &#123;% for key, value in task.items() %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; key &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>类似还有if语法</p>
<h3 id="处理表单"><a href="#处理表单" class="headerlink" title="处理表单"></a>处理表单</h3><p>flask 里面还自带了<code>request</code></p>
<p><code>from flask import Flask, render_template, request</code>引入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表单提交</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/test/register&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;test/register.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/result&quot;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>]</span>)  </span><span class="comment"># 默认不接受get以外的请求</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">result</span>():</span></span><br><span class="line">    <span class="keyword">if</span> request.method ==<span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        result = request.form</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&quot;test/result.html&quot;</span>,result=result)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;GET&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>前端表单页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:5000/result&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>地址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意此处也可以使用<code>&#123;&#123;url_for('result')&#125;&#125;</code>代替来获取根路由的路径</strong></p>
<p>路由通过post请求接受到表单数据以后跳转到result页面 并解析数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    &#123;% for key, value in result.items() %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; key &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="首页制作-实战"><a href="#首页制作-实战" class="headerlink" title="首页制作 实战"></a>首页制作 实战</h2><ol>
<li>新创建一个Flask项目</li>
<li>从模板网站导入一个模板, 并分别放到templates和static文件夹下</li>
<li>使用<code>render_template</code>设置路由</li>
<li>对静态html页面进行修改, 改成只留下我们所需要的内容</li>
<li>修改静态html内的文字内容</li>
<li>使用类似方式创建movie.html来使数据库中的数据可视化为表格</li>
</ol>
<h3 id="Movie表格可视化"><a href="#Movie表格可视化" class="headerlink" title="Movie表格可视化"></a>Movie表格可视化</h3><p>路由设置, 从数据库中取出数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/movie&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">movie_page</span>():</span></span><br><span class="line">    datalist = []</span><br><span class="line">    con = sqlite3.connect(<span class="string">&quot;movie.db&quot;</span>)</span><br><span class="line">    cur = con.cursor()</span><br><span class="line">    sql = <span class="string">&quot;select * from movie250&quot;</span></span><br><span class="line">    data = cur.execute(sql)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">        datalist.append(item)</span><br><span class="line">    cur.close()</span><br><span class="line">    con.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;movie.html&quot;</span>, movies=datalist)</span><br></pre></td></tr></table></figure>



<p>然后再前端页面中建一个表格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-striped&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>排名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>电影中文名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>电影外文名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>电影评分<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>评价人数<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>一句话概述<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>其他信息<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>获取数据显示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for movie in movies %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[0] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; movie[1] &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; movie[3] &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[4] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[5] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[6] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[7] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; movie[8] &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>







<h2 id="Echarts应用"><a href="#Echarts应用" class="headerlink" title="Echarts应用"></a>Echarts应用</h2><p>官方中文网址: <a target="_blank" rel="noopener" href="http://www.echartsjs.com/zh/index.html">http://www.echartsjs.com/zh/index.html</a></p>
<p>新版网址: <a target="_blank" rel="noopener" href="https://echarts.apache.org/">https://echarts.apache.org/</a></p>
<p>示例: </p>
<ol>
<li>引入文件</li>
<li>从官方网站拷贝提供的示例源码</li>
</ol>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><ol>
<li>新建score.html显示页面, </li>
<li>编写路由查询处理需要渲染的数据</li>
<li>前端解析</li>
</ol>
<p>路由: </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/score&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">score_page</span>():</span></span><br><span class="line">    score = []</span><br><span class="line">    score_count = []</span><br><span class="line">    con = sqlite3.connect(<span class="string">&#x27;movie.db&#x27;</span>)</span><br><span class="line">    cur = con.cursor()</span><br><span class="line">    sql = <span class="string">&quot;select score, count(score) from movie250 group by score&quot;</span></span><br><span class="line">    data = cur.execute(sql)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line">        score.append(item[<span class="number">0</span>])</span><br><span class="line">        score_count.append(item[<span class="number">1</span>])</span><br><span class="line">    cur.close()</span><br><span class="line">    con.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;score.html&quot;</span>, score=score, score_count=score_count)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>前端解析</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> dom = <span class="built_in">document</span>.getElementById(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> myChart = echarts.init(dom);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">    option = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">    option = &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">color</span>: [<span class="string">&#x27;#3398DB&#x27;</span>],</span></span><br><span class="line"><span class="javascript">        <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">axisPointer</span>: &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">type</span>: <span class="string">&#x27;shadow&#x27;</span></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">grid</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">top</span>: <span class="string">&#x27;4%&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">bottom</span>: <span class="string">&#x27;3%&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">containLabel</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">data</span>: &#123;&#123; score &#125;&#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">series</span>: [&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">data</span>: &#123;&#123; score_count &#125;&#125;,</span></span><br><span class="line"><span class="javascript">            <span class="attr">barWidth</span>: <span class="string">&#x27;60%&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        &#125;]</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">    ;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (option &amp;&amp; <span class="keyword">typeof</span> option === <span class="string">&quot;object&quot;</span>) &#123;</span></span><br><span class="line"><span class="javascript">        myChart.setOption(option, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="WordCloud应用"><a href="#WordCloud应用" class="headerlink" title="WordCloud应用"></a>WordCloud应用</h2><p>使用中文词云需要使用<code>jieba</code>, <code>matplotlib</code>, <code>wordcloud</code>库</p>
<p>wordcloud 安装不成功的话需要到官方网址去: <a target="_blank" rel="noopener" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#wordcloud">https://www.lfd.uci.edu/~gohlke/pythonlibs/#wordcloud</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba                                <span class="comment"># 分词</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt        <span class="comment"># 数据可视化</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud             <span class="comment"># 词云</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image                       <span class="comment"># 图片处理</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np                          <span class="comment"># 矩阵运算</span></span><br><span class="line"><span class="keyword">import</span> sqlite3                              <span class="comment"># 数据库</span></span><br></pre></td></tr></table></figure>

<ol>
<li>从数据库中获取</li>
<li>分词</li>
<li>设置词云配置</li>
<li>生成词云</li>
<li>显示解析词云图片</li>
</ol>
<p>数据库获取</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">con = sqlite3.connect(<span class="string">&#x27;../movie.db&#x27;</span>)</span><br><span class="line">cur = con.cursor()</span><br><span class="line">sql = <span class="string">&#x27;select introduction from movie250&#x27;</span></span><br><span class="line">data = cur.execute(sql)</span><br><span class="line">text = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    text = text + item[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># print(text)</span></span><br><span class="line">cur.close()</span><br><span class="line">con.close()</span><br></pre></td></tr></table></figure>



<p>分词</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分词</span></span><br><span class="line">cut = jieba.cut(text)</span><br><span class="line"><span class="built_in">str</span> = <span class="string">&#x27; &#x27;</span>.join(cut)</span><br><span class="line"><span class="comment"># print(str)</span></span><br></pre></td></tr></table></figure>



<p>使用图片轮廓设置词云</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">r&#x27;../static/assets/img/tree.jpg&#x27;</span>)</span><br><span class="line">img_array = np.array(img)       <span class="comment"># 将u图片转换成数组</span></span><br><span class="line">wc = WordCloud(</span><br><span class="line">    background_color=<span class="string">&#x27;white&#x27;</span>,</span><br><span class="line">    mask=img_array,</span><br><span class="line">    font_path=<span class="string">&quot;msyh.ttc&quot;</span>        <span class="comment"># 字体所在位置: C:\Windows\Fonts</span></span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>生成词云图片</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wc.generate_from_text(<span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制图片</span></span><br><span class="line">fig = plt.figure(<span class="number">1</span>)</span><br><span class="line">plt.imshow(wc)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<p>或者生成图片为文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出词云文件到文件</span></span><br><span class="line">plt.savefig(<span class="string">r&#x27;../static/assets/img/word.jpg&#x27;</span>, dpi=<span class="number">500</span>)  <span class="comment"># 需要注释掉 plt.show()</span></span><br></pre></td></tr></table></figure>



<h3 id="将图片放到页面中"><a href="#将图片放到页面中" class="headerlink" title="将图片放到页面中"></a>将图片放到页面中</h3><p>直接更改原本模板中word.html中的图片路径即可, 然后删除多余的元素</p>
<p>—End—</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">klenq</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://klenq.github.io/2021/12/06/Python学习笔记(一·)/">https://klenq.github.io/2021/12/06/Python学习笔记(一·)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/12/06/Python%20Numpy&amp;Pandas/"><i class="fa fa-chevron-left">  </i><span>Python 的 Numpy &amp; Pandas 库</span></a></div><div class="next-post pull-right"><a href="/2021/12/06/%E5%AE%89%E8%A3%85Linux%E4%BD%9C%E4%B8%BA%E5%8F%8C%E7%B3%BB%E7%BB%9F/"><span>安装Linux作为双系统</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://raw.githubusercontent.com/klenQ/klenQ.github.io/master/img/top_img/ff7_img_2.png)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2022 By klenq</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>